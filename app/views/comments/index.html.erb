<h2>Comments</h2>

<% @comments.each do |comment| %>
  <div class="comment">
    <p><%= comment.content %></p>
    <p>Created By: <%= comment.user.username %></p>
    <p><%= comment.created_at.strftime("%B %d, %Y at %I:%M %p") %></p>
    <% if can? :update, comment %>
      <%= link_to "Edit", edit_article_comment_path(@article, comment) %>
    <% end %>
    <% if can? :destroy, comment %>
      <%= link_to "Delete", article_comment_path(@article, comment), method: :delete, data: { confirm: "Are you sure?" } %>
    <% end %>
  </div>
<% end %>

<% if user_signed_in? %>
  <h3>Add a Comment</h3>
  <%= form_for [@article, @article.comments.build] do |f| %>
    <div class="field">
      <%= f.label :content %><br>
      <%= f.text_area :content, rows: 5 %>
    </div>
    <div class="actions">
      <%= f.submit "Submit", class: "btn btn-primary" %>
    </div>
  <% end %>
<% else %>
  <p>Please <%= link_to "sign in", new_user_session_path %> to leave a comment.</p>
<% end %>
