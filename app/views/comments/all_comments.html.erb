<div class="container">
    <%= form_with url: approving_comments_path(@comment), method: :patch do |form| %>
        <h3> All Comments </h3>

        <table class="table">
        <thead>
            <tr>
            <th scope="col">index</th>
            <th scope="col">Comment</th>
            <th scope="col">Commenter</th>
            <th scope="col">Article</th>
            <th scope="col">Author</th>
            <th scope="col">Status</th>
            <th scope="col">Approve</th>
            </tr>
        </thead>
        <tbody>
            <% @comments.each_with_index do |comment,index| %>
            <%# if can? [ :all_comments, :approve_comments ], comment %>
                <tr scope="row">
                    <td><%= index+1 %></td>
                    <td><%= comment.content %></td>
                    <td><%= comment.user.username %></td>
                    <td><%= comment.article.title %></td>
                    <td><%= comment.article.user.username %></td>
                    <td><%= comment.article.status %></td>
                    <td><div class="field">
                        <%= form.check_box "comments[comment #{comment.id}]", checked: comment.approved %>
                    </div></td>
                </tr>
            <%# end %>
            <% end %>
        </tbody>
        </table>
        <div class="actions mt-3">
            <%= form.submit "Submit", class: 'btn btn-dark' %>
        </div>
    <%end%>
</div>